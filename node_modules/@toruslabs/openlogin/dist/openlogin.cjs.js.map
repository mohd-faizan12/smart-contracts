{"version":3,"file":"openlogin.cjs.js","mappings":"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","sources":["webpack://@toruslabs/openlogin/webpack/bootstrap","webpack://@toruslabs/openlogin/webpack/runtime/compat get default export","webpack://@toruslabs/openlogin/webpack/runtime/define property getters","webpack://@toruslabs/openlogin/webpack/runtime/hasOwnProperty shorthand","webpack://@toruslabs/openlogin/webpack/runtime/make namespace object","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@toruslabs/openlogin/external commonjs2 \"ts-custom-error\"","webpack://@toruslabs/openlogin/./src/errors.ts","webpack://@toruslabs/openlogin/external commonjs2 \"loglevel\"","webpack://@toruslabs/openlogin/./src/loglevel.ts","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-session-manager\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-utils\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/broadcast-channel\"","webpack://@toruslabs/openlogin/external commonjs2 \"events\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/eccrypto\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/metadata-helpers\"","webpack://@toruslabs/openlogin/./src/utils.ts","webpack://@toruslabs/openlogin/./src/PopupHandler.ts","webpack://@toruslabs/openlogin/./src/OpenLogin.ts","webpack://@toruslabs/openlogin/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"ts-custom-error\");","import { CustomError } from \"ts-custom-error\";\n\nexport interface IOpenloginError extends CustomError {\n  code: number;\n  message: string;\n  toString(): string;\n}\n\nexport type ErrorCodes = {\n  [key: number]: string;\n};\n\nexport abstract class OpenloginError extends CustomError implements IOpenloginError {\n  code: number;\n\n  message: string;\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(message);\n\n    this.code = code;\n    this.message = message || \"\";\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"OpenloginError\" });\n  }\n\n  toJSON(): IOpenloginError {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message,\n    };\n  }\n\n  toString(): string {\n    return JSON.stringify(this.toJSON());\n  }\n}\n\nexport class InitializationError extends OpenloginError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5001: \"Invalid constructor params\",\n    5002: \"SDK not initialized. please call init first\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"InitializationError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): OpenloginError {\n    return new InitializationError(code, `${InitializationError.messages[code]}, ${extraMessage}`);\n  }\n\n  public static invalidParams(extraMessage = \"\"): OpenloginError {\n    return InitializationError.fromCode(5001, extraMessage);\n  }\n\n  public static notInitialized(extraMessage = \"\"): OpenloginError {\n    return InitializationError.fromCode(5002, extraMessage);\n  }\n}\n\n/**\n * login errors\n */\n\nexport class LoginError extends OpenloginError {\n  protected static messages: ErrorCodes = {\n    5000: \"Custom\",\n    5111: \"Invalid login params\",\n    5112: \"User not logged in.\",\n    5113: \"login popup has been closed by the user\",\n    5114: \"Login failed\",\n  };\n\n  public constructor(code: number, message?: string) {\n    // takes care of stack and proto\n    super(code, message);\n\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", { value: \"LoginError\" });\n  }\n\n  public static fromCode(code: number, extraMessage = \"\"): OpenloginError {\n    return new LoginError(code, `${LoginError.messages[code]}, ${extraMessage}`);\n  }\n\n  public static invalidLoginParams(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5111, extraMessage);\n  }\n\n  public static userNotLoggedIn(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5112, extraMessage);\n  }\n\n  public static popupClosed(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5113, extraMessage);\n  }\n\n  public static loginFailed(extraMessage = \"\"): OpenloginError {\n    return LoginError.fromCode(5114, extraMessage);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"loglevel\");","import loglevel from \"loglevel\";\n\nconst log = loglevel.getLogger(\"openlogin\");\n\nlog.setLevel(\"error\");\n\nexport default log;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/openlogin-session-manager\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/openlogin-utils\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/broadcast-channel\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"events\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/eccrypto\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/metadata-helpers\");","import { getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { keccak256 } from \"@toruslabs/metadata-helpers\";\nimport { base64url, safeatob } from \"@toruslabs/openlogin-utils\";\n\nimport log from \"./loglevel\";\n\n// don't use destructuring for process.env cause it messes up webpack env plugin\nexport const version = process.env.OPENLOGIN_VERSION;\n\nexport async function whitelistUrl(clientId: string, appKey: string, origin: string): Promise<string> {\n  const appKeyBuf = Buffer.from(appKey.padStart(64, \"0\"), \"hex\");\n  if (base64url.encode(getPublic(appKeyBuf)) !== clientId) throw new Error(\"appKey mismatch\");\n  const sig = await sign(appKeyBuf, keccak256(Buffer.from(origin, \"utf8\")));\n  return base64url.encode(sig);\n}\n\nexport function getHashQueryParams(replaceUrl = false): { sessionId?: string; sessionNamespace?: string; error?: string } {\n  const result: { sessionId?: string; sessionNamespace?: string; error?: string } = {};\n\n  const url = new URL(window.location.href);\n  url.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const queryResult = url.searchParams.get(\"result\");\n  if (queryResult) {\n    try {\n      const queryParams = JSON.parse(safeatob(queryResult));\n      Object.keys(queryParams).forEach((key) => {\n        result[key] = queryParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  const hash = url.hash.substring(1);\n  const hashUrl = new URL(`${window.location.origin}/?${hash}`);\n  hashUrl.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const hashResult = hashUrl.searchParams.get(\"result\");\n\n  if (hashResult) {\n    try {\n      const hashParams = JSON.parse(safeatob(hashResult));\n      Object.keys(hashParams).forEach((key) => {\n        result[key] = hashParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  if (replaceUrl) {\n    const cleanUrl = window.location.origin + window.location.pathname;\n    window.history.replaceState(null, \"\", cleanUrl);\n  }\n\n  return result;\n}\n\nexport function constructURL(params: { baseURL: string; query?: Record<string, unknown>; hash?: Record<string, unknown> }): string {\n  const { baseURL, query, hash } = params;\n\n  const url = new URL(baseURL);\n  if (query) {\n    Object.keys(query).forEach((key) => {\n      url.searchParams.append(key, query[key] as string);\n    });\n  }\n  if (hash) {\n    const h = new URL(constructURL({ baseURL, query: hash })).searchParams.toString();\n    url.hash = h;\n  }\n  return url.toString();\n}\n\nexport function getPopupFeatures(): string {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n\n  const w = 1200;\n  const h = 700;\n\n  const width = window.innerWidth\n    ? window.innerWidth\n    : document.documentElement.clientWidth\n    ? document.documentElement.clientWidth\n    : window.screen.width;\n\n  const height = window.innerHeight\n    ? window.innerHeight\n    : document.documentElement.clientHeight\n    ? document.documentElement.clientHeight\n    : window.screen.height;\n\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\n","import { BroadcastChannel } from \"@toruslabs/broadcast-channel\";\nimport { EventEmitter } from \"events\";\n\nimport { getPopupFeatures } from \"./utils\";\n\nclass PopupHandler extends EventEmitter {\n  url: string;\n\n  target: string;\n\n  features: string;\n\n  window: Window;\n\n  windowTimer: number;\n\n  iClosedWindow: boolean;\n\n  constructor({ url, target, features }: { url: string; target?: string; features?: string }) {\n    super();\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures();\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n    this._setupTimer();\n  }\n\n  _setupTimer(): void {\n    this.windowTimer = Number(\n      setInterval(() => {\n        if (this.window && this.window.closed) {\n          clearInterval(this.windowTimer);\n          if (!this.iClosedWindow) {\n            this.emit(\"close\");\n          }\n          this.iClosedWindow = false;\n          this.window = undefined;\n        }\n        if (this.window === undefined) clearInterval(this.windowTimer);\n      }, 500)\n    );\n  }\n\n  open(): void {\n    this.window = window.open(this.url, this.target, this.features);\n    if (this.window?.focus) this.window.focus();\n  }\n\n  close(): void {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n\n  redirect(locationReplaceOnRedirect: boolean): void {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url);\n    } else {\n      window.location.href = this.url;\n    }\n  }\n\n  async listenOnChannel(loginId: string): Promise<{ sessionId: string; sessionNamespace?: string }> {\n    return new Promise<{ sessionId: string; sessionNamespace?: string }>((resolve, reject) => {\n      const bc = new BroadcastChannel<{ error?: string; data?: { sessionId: string; sessionNamespace?: string } }>(loginId, {\n        webWorkerSupport: false,\n        type: \"server\",\n      });\n      bc.addEventListener(\"message\", (ev) => {\n        this.close();\n        bc.close();\n        if (ev.error) {\n          reject(new Error(ev.error));\n        } else {\n          resolve(ev.data);\n        }\n      });\n    });\n  }\n}\n\nexport default PopupHandler;\n","import { OpenloginSessionManager } from \"@toruslabs/openlogin-session-manager\";\nimport {\n  BaseLoginParams,\n  BaseRedirectParams,\n  BrowserStorage,\n  jsonToBase64,\n  LoginParams,\n  OPENLOGIN_NETWORK,\n  OPENLOGIN_NETWORK_TYPE,\n  OpenLoginOptions,\n  OpenloginSessionConfig,\n  OpenloginSessionData,\n  OpenloginUserInfo,\n  UX_MODE,\n} from \"@toruslabs/openlogin-utils\";\nimport log from \"loglevel\";\n\nimport { InitializationError, LoginError } from \"./errors\";\nimport PopupHandler from \"./PopupHandler\";\nimport { constructURL, getHashQueryParams, version } from \"./utils\";\n\nclass OpenLogin {\n  state: OpenloginSessionData = {};\n\n  options: OpenLoginOptions;\n\n  private versionSupportNetworks: OPENLOGIN_NETWORK_TYPE[] = [OPENLOGIN_NETWORK.MAINNET, OPENLOGIN_NETWORK.CYAN, OPENLOGIN_NETWORK.AQUA];\n\n  private sessionManager: OpenloginSessionManager<OpenloginSessionData>;\n\n  private currentStorage: BrowserStorage;\n\n  private _storageBaseKey = \"openlogin_store\";\n\n  constructor(options: OpenLoginOptions) {\n    if (!options.clientId) throw InitializationError.invalidParams(\"clientId is required\");\n    if (!options.sdkUrl) {\n      if (options.network === OPENLOGIN_NETWORK.MAINNET) {\n        options.sdkUrl = \"https://app.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.CYAN) {\n        options.sdkUrl = \"https://cyan.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.TESTNET) {\n        options.sdkUrl = \"https://testing.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.AQUA) {\n        options.sdkUrl = \"https://aqua.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.DEVELOPMENT) {\n        options.sdkUrl = \"http://localhost:3000\";\n      }\n    }\n    if (!options.sdkUrl) {\n      throw InitializationError.invalidParams(\"network or sdk url\");\n    }\n\n    if (!options.redirectUrl) {\n      options.redirectUrl = `${window.location.protocol}//${window.location.host}${window.location.pathname}`;\n    }\n\n    if (!options.uxMode) options.uxMode = UX_MODE.REDIRECT;\n    if (typeof options.replaceUrlOnRedirect !== \"boolean\") options.replaceUrlOnRedirect = true;\n    if (!options.originData) options.originData = {};\n    if (!options.whiteLabel) options.whiteLabel = {};\n    if (!options.loginConfig) options.loginConfig = {};\n    if (!options.mfaSettings) options.mfaSettings = {};\n    if (!options.storageServerUrl) options.storageServerUrl = \"https://broadcast-server.tor.us\";\n    if (!options.storageKey) options.storageKey = \"local\";\n    if (!options.webauthnTransports) options.webauthnTransports = [\"internal\"];\n    if (!options.sessionTime) options.sessionTime = 86400;\n\n    this.options = options;\n  }\n\n  get privKey(): string {\n    return this.state.privKey ? this.state.privKey.padStart(64, \"0\") : \"\";\n  }\n\n  get coreKitKey(): string {\n    return this.state.coreKitKey ? this.state.coreKitKey.padStart(64, \"0\") : \"\";\n  }\n\n  get ed25519PrivKey(): string {\n    return this.state.ed25519PrivKey ? this.state.ed25519PrivKey.padStart(128, \"0\") : \"\";\n  }\n\n  get coreKitEd25519Key(): string {\n    return this.state.coreKitEd25519PrivKey ? this.state.coreKitEd25519PrivKey.padStart(128, \"0\") : \"\";\n  }\n\n  get sessionId(): string {\n    return this.state.sessionId || \"\";\n  }\n\n  get sessionNamespace(): string {\n    return this.options.sessionNamespace || \"\";\n  }\n\n  async init(): Promise<void> {\n    // get sessionNamespace from the redirect result.\n    const params = getHashQueryParams(this.options.replaceUrlOnRedirect);\n    if (params.sessionNamespace) this.options.sessionNamespace = params.sessionNamespace;\n\n    const storageKey = this.options.sessionNamespace ? `${this._storageBaseKey}_${this.options.sessionNamespace}` : this._storageBaseKey;\n    this.currentStorage = BrowserStorage.getInstance(storageKey, this.options.storageKey);\n\n    const sessionId = this.currentStorage.get<string>(\"sessionId\");\n\n    this.sessionManager = new OpenloginSessionManager({\n      sessionServerBaseUrl: this.options.storageServerUrl,\n      sessionNamespace: this.options.sessionNamespace,\n      sessionTime: this.options.sessionTime,\n      sessionId,\n    });\n\n    if (this.options.network === OPENLOGIN_NETWORK.TESTNET) {\n      // using console log because it shouldn't be affected by loglevel config\n      // eslint-disable-next-line no-console\n      console.log(\"%c WARNING! You are on testnet. Please set network: 'mainnet' in production\", \"color: #FF0000\");\n    }\n\n    if (params.error) {\n      throw LoginError.loginFailed(params.error);\n    }\n\n    if (params.sessionId) {\n      this.currentStorage.set(\"sessionId\", params.sessionId);\n      this.sessionManager.sessionKey = params.sessionId;\n    }\n\n    if (this.sessionManager.sessionKey) {\n      const data = await this._authorizeSession();\n      // Fill state with correct info from session\n      // If session is invalid all the data is unset here.\n      this.updateState(data);\n      if (Object.keys(data).length === 0) {\n        // If session is invalid, unset the sessionId from localStorage.\n        this.currentStorage.set(\"sessionId\", \"\");\n      }\n    }\n  }\n\n  async login(params: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    if (!params.loginProvider) throw LoginError.invalidLoginParams(`loginProvider is required`);\n\n    // in case of redirect mode, redirect url will be dapp specified\n    // in case of popup mode, redirect url will be sdk specified\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.options.redirectUrl,\n    };\n\n    const loginParams: LoginParams = {\n      loginProvider: params.loginProvider,\n      ...defaultParams,\n      ...params,\n    };\n    // do this in popup-window route\n    // loginParams.redirectUrl = this.options.uxMode === UX_MODE.POPUP ? `${this.options.sdkUrl}/popup-window` : loginParams.redirectUrl;\n\n    const base64url = this.getBaseUrl();\n\n    // construct the url to open for either popup/redirect mode and call request method to handle the rest\n    const loginId = await this.getLoginId(loginParams);\n    const configParams: BaseLoginParams = {\n      loginId,\n      sessionNamespace: this.options.sessionNamespace,\n    };\n\n    if (this.options.uxMode === UX_MODE.REDIRECT) {\n      const loginUrl = constructURL({\n        baseURL: base64url,\n        hash: { b64Params: jsonToBase64(configParams) },\n      });\n      window.location.href = loginUrl;\n      return undefined;\n    }\n    return new Promise((resolve, reject) => {\n      const loginUrl = constructURL({\n        baseURL: base64url,\n        hash: { b64Params: jsonToBase64(configParams) },\n      });\n      const currentWindow = new PopupHandler({ url: loginUrl });\n\n      currentWindow.on(\"close\", () => {\n        reject(LoginError.popupClosed());\n      });\n\n      currentWindow\n        .listenOnChannel(loginId)\n        .then(({ sessionId, sessionNamespace }) => {\n          this.sessionManager.sessionKey = sessionId;\n          this.options.sessionNamespace = sessionNamespace;\n          this.currentStorage.set(\"sessionId\", sessionId);\n          return this.sessionManager.authorizeSession();\n        })\n        .then((sessionData: OpenloginSessionData) => {\n          this.updateState(sessionData);\n          return resolve({ privKey: this.privKey });\n        })\n        .catch(reject);\n\n      currentWindow.open();\n    });\n  }\n\n  async logout(): Promise<void> {\n    if (!this.sessionManager.sessionKey) throw LoginError.userNotLoggedIn();\n    await this.sessionManager.invalidateSession();\n    this.updateState({\n      privKey: \"\",\n      coreKitKey: \"\",\n      coreKitEd25519PrivKey: \"\",\n      ed25519PrivKey: \"\",\n      walletKey: \"\",\n      oAuthPrivateKey: \"\",\n      tKey: \"\",\n      userInfo: {\n        name: \"\",\n        profileImage: \"\",\n        dappShare: \"\",\n        idToken: \"\",\n        oAuthIdToken: \"\",\n        oAuthAccessToken: \"\",\n        appState: \"\",\n        email: \"\",\n        verifier: \"\",\n        verifierId: \"\",\n        aggregateVerifier: \"\",\n        typeOfLogin: \"\",\n      },\n    });\n\n    this.currentStorage.set(\"sessionId\", \"\");\n  }\n\n  getUserInfo(): OpenloginUserInfo {\n    if (!this.sessionManager.sessionKey) {\n      throw LoginError.userNotLoggedIn();\n    }\n    return this.state.userInfo;\n  }\n\n  async getLoginId(loginParams: LoginParams & Partial<BaseRedirectParams>): Promise<string> {\n    if (!this.sessionManager) throw InitializationError.notInitialized();\n    const dataObject: OpenloginSessionConfig = {\n      options: this.options,\n      params: loginParams,\n    };\n\n    const loginId = OpenloginSessionManager.generateRandomSessionKey();\n    const loginSessionMgr = new OpenloginSessionManager<OpenloginSessionConfig>({\n      sessionServerBaseUrl: this.options.storageServerUrl,\n      sessionNamespace: this.options.sessionNamespace,\n      sessionTime: 600, // each login key must be used with 10 mins (might be used at the end of popup redirect)\n      sessionId: loginId,\n    });\n\n    await loginSessionMgr.createSession(JSON.parse(JSON.stringify(dataObject)));\n\n    return loginId;\n  }\n\n  private async _authorizeSession(): Promise<OpenloginSessionData> {\n    try {\n      if (!this.sessionManager.sessionKey) return {};\n      const result = await this.sessionManager.authorizeSession();\n      return result;\n    } catch (err) {\n      log.error(\"authorization failed\", err);\n      return {};\n    }\n  }\n\n  private updateState(data: Partial<OpenloginSessionData>) {\n    this.state = { ...this.state, ...data };\n  }\n\n  private getBaseUrl(): string {\n    if (this.versionSupportNetworks.includes(this.options.network)) {\n      return `${this.options.sdkUrl}/v${version.split(\".\")[0]}/start`;\n    }\n    return `${this.options.sdkUrl}/start`;\n  }\n}\n\nexport default OpenLogin;\n","export * from \"./errors\";\nexport { default as loglevel } from \"./loglevel\";\nexport { default } from \"./OpenLogin\";\nexport * from \"./utils\";\n"],"names":["CustomError","OpenloginError","constructor","code","message","_defineProperty","Object","defineProperty","value","toJSON","name","toString","JSON","stringify","InitializationError","fromCode","extraMessage","arguments","length","undefined","messages","invalidParams","notInitialized","LoginError","invalidLoginParams","userNotLoggedIn","popupClosed","loginFailed","loglevel","log","getLogger","setLevel","getPublic","sign","keccak256","base64url","safeatob","version","process","env","OPENLOGIN_VERSION","whitelistUrl","clientId","appKey","origin","appKeyBuf","Buffer","from","padStart","encode","Error","sig","getHashQueryParams","replaceUrl","result","url","URL","window","location","href","searchParams","forEach","key","queryResult","get","queryParams","parse","keys","error","hash","substring","hashUrl","hashResult","hashParams","cleanUrl","pathname","history","replaceState","constructURL","params","baseURL","query","append","h","getPopupFeatures","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","width","innerWidth","document","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","Math","abs","top","features","BroadcastChannel","EventEmitter","PopupHandler","_ref","target","windowTimer","iClosedWindow","_setupTimer","Number","setInterval","closed","clearInterval","emit","open","_this$window","focus","close","redirect","locationReplaceOnRedirect","replace","listenOnChannel","loginId","Promise","resolve","reject","bc","webWorkerSupport","type","addEventListener","ev","data","OpenloginSessionManager","BrowserStorage","jsonToBase64","OPENLOGIN_NETWORK","UX_MODE","OpenLogin","options","MAINNET","CYAN","AQUA","sdkUrl","network","TESTNET","DEVELOPMENT","redirectUrl","protocol","host","uxMode","REDIRECT","replaceUrlOnRedirect","originData","whiteLabel","loginConfig","mfaSettings","storageServerUrl","storageKey","webauthnTransports","sessionTime","privKey","state","coreKitKey","ed25519PrivKey","coreKitEd25519Key","coreKitEd25519PrivKey","sessionId","sessionNamespace","init","_storageBaseKey","currentStorage","getInstance","sessionManager","sessionServerBaseUrl","console","set","sessionKey","_authorizeSession","updateState","login","loginProvider","defaultParams","loginParams","_objectSpread","getBaseUrl","getLoginId","configParams","loginUrl","b64Params","currentWindow","on","then","authorizeSession","sessionData","catch","logout","invalidateSession","walletKey","oAuthPrivateKey","tKey","userInfo","profileImage","dappShare","idToken","oAuthIdToken","oAuthAccessToken","appState","email","verifier","verifierId","aggregateVerifier","typeOfLogin","getUserInfo","dataObject","generateRandomSessionKey","loginSessionMgr","createSession","err","versionSupportNetworks","includes","split","default"],"sourceRoot":""}