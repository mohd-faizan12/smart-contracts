{"version":3,"file":"openlogin.esm.js","sources":["../src/errors.ts","../src/loglevel.ts","../src/utils.ts","../src/PopupHandler.ts","../src/OpenLogin.ts"],"sourcesContent":[null,null,null,null,null],"names":["OpenloginError","CustomError","constructor","code","message","_defineProperty","Object","defineProperty","value","toJSON","name","toString","JSON","stringify","InitializationError","fromCode","extraMessage","arguments","length","undefined","messages","invalidParams","notInitialized","LoginError","invalidLoginParams","userNotLoggedIn","popupClosed","loginFailed","log","loglevel","getLogger","setLevel","version","whitelistUrl","clientId","appKey","origin","appKeyBuf","Buffer","from","padStart","base64url","encode","getPublic","Error","sig","sign","keccak256","getHashQueryParams","replaceUrl","result","url","URL","window","location","href","searchParams","forEach","key","queryResult","get","queryParams","parse","safeatob","keys","error","hash","substring","hashUrl","hashResult","hashParams","cleanUrl","pathname","history","replaceState","constructURL","params","baseURL","query","append","h","getPopupFeatures","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","width","innerWidth","document","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","left","Math","abs","top","features","PopupHandler","EventEmitter","_ref","target","windowTimer","iClosedWindow","_setupTimer","Number","setInterval","closed","clearInterval","emit","open","_this$window","focus","close","redirect","locationReplaceOnRedirect","replace","listenOnChannel","loginId","Promise","resolve","reject","bc","BroadcastChannel","webWorkerSupport","type","addEventListener","ev","data","OpenLogin","options","OPENLOGIN_NETWORK","MAINNET","CYAN","AQUA","sdkUrl","network","TESTNET","DEVELOPMENT","redirectUrl","protocol","host","uxMode","UX_MODE","REDIRECT","replaceUrlOnRedirect","originData","whiteLabel","loginConfig","mfaSettings","storageServerUrl","storageKey","webauthnTransports","sessionTime","privKey","state","coreKitKey","ed25519PrivKey","coreKitEd25519Key","coreKitEd25519PrivKey","sessionId","sessionNamespace","init","_storageBaseKey","currentStorage","BrowserStorage","getInstance","sessionManager","OpenloginSessionManager","sessionServerBaseUrl","console","set","sessionKey","_authorizeSession","updateState","login","loginProvider","defaultParams","loginParams","_objectSpread","getBaseUrl","getLoginId","configParams","loginUrl","b64Params","jsonToBase64","currentWindow","on","then","authorizeSession","sessionData","catch","logout","invalidateSession","walletKey","oAuthPrivateKey","tKey","userInfo","profileImage","dappShare","idToken","oAuthIdToken","oAuthAccessToken","appState","email","verifier","verifierId","aggregateVerifier","typeOfLogin","getUserInfo","dataObject","generateRandomSessionKey","loginSessionMgr","createSession","err","versionSupportNetworks","includes","split"],"mappings":"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"}